<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-11-19">

<title>ChatGPT Daily Brief (CDB) – riki’s site</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-5b4ad623e5705c0698d39aec6f10cf02.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">riki’s site</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../02_articles.html"> 
<span class="menu-text">articles &amp; papers</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../01_projects.html"> 
<span class="menu-text">projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../essay/index_essay.html"> 
<span class="menu-text">essays</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../cdb/index_cdb.html"> 
<span class="menu-text">ChatGPT’s daily brief</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#lead-assessment" id="toc-lead-assessment" class="nav-link active" data-scroll-target="#lead-assessment">Lead Assessment</a></li>
  <li><a href="#regional-spotlights" id="toc-regional-spotlights" class="nav-link" data-scroll-target="#regional-spotlights">Regional Spotlights</a>
  <ul class="collapse">
  <li><a href="#levant-israellebanon" id="toc-levant-israellebanon" class="nav-link" data-scroll-target="#levant-israellebanon">Levant / Israel–Lebanon</a></li>
  <li><a href="#black-sea-ukraine" id="toc-black-sea-ukraine" class="nav-link" data-scroll-target="#black-sea-ukraine">Black Sea / Ukraine</a></li>
  <li><a href="#south-china-sea-philippines" id="toc-south-china-sea-philippines" class="nav-link" data-scroll-target="#south-china-sea-philippines">South China Sea / Philippines</a></li>
  <li><a href="#latin-america-venezuela" id="toc-latin-america-venezuela" class="nav-link" data-scroll-target="#latin-america-venezuela">Latin America / Venezuela</a></li>
  <li><a href="#africa-sahelhornsudan" id="toc-africa-sahelhornsudan" class="nav-link" data-scroll-target="#africa-sahelhornsudan">Africa / Sahel–Horn–Sudan</a></li>
  </ul></li>
  <li><a href="#watch-items-24-72-h" id="toc-watch-items-24-72-h" class="nav-link" data-scroll-target="#watch-items-24-72-h">Watch Items (24-72 h)</a></li>
  <li><a href="#annex-business-financial-indicators" id="toc-annex-business-financial-indicators" class="nav-link" data-scroll-target="#annex-business-financial-indicators">Annex — Business &amp; Financial Indicators</a>
  <ul class="collapse">
  <li><a href="#macro-markets" id="toc-macro-markets" class="nav-link" data-scroll-target="#macro-markets">Macro &amp; Markets</a></li>
  <li><a href="#energy-resources" id="toc-energy-resources" class="nav-link" data-scroll-target="#energy-resources">Energy &amp; Resources</a></li>
  <li><a href="#defense-industrial-base" id="toc-defense-industrial-base" class="nav-link" data-scroll-target="#defense-industrial-base">Defense / Industrial Base</a></li>
  <li><a href="#notes-on-confidence" id="toc-notes-on-confidence" class="nav-link" data-scroll-target="#notes-on-confidence">Notes on Confidence</a></li>
  <li><a href="#sources" id="toc-sources" class="nav-link" data-scroll-target="#sources">Sources</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ChatGPT Daily Brief (CDB)</h1>
<p class="subtitle lead">Open-Source Intelligence Edition</p>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 19, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="lead-assessment" class="level2">
<h2 class="anchored" data-anchor-id="lead-assessment">Lead Assessment</h2>
<p><strong>Global markets enter risk-off mode as AI valuation concerns, yen weakness and Ukraine cease-fire rumours weigh.</strong></p>
<ul>
<li>Equity markets are under pressure: Asian shares fell, the tech-heavy Nasdaq slipped ~1.2% ahead of major earnings from Nvidia. (<a href="https://www.reuters.com/world/china/global-markets-global-markets-2025-11-19/?utm_source=chatgpt.com" title="Asia markets teeter ahead of Nvidia earnings test">Reuters</a>)</li>
<li>The Japanese yen hit a 10-month low, with the government signalling market intervention may be required. (<a href="https://www.reuters.com/world/asia-pacific/yen-bid-dollar-steadies-investors-look-safety-global-selloff-2025-11-19/?utm_source=chatgpt.com" title="Sterling eases after UK inflation, dollar rises ahead of Nvidia results">Reuters</a>)</li>
<li>Oil prices plunged after reports of a U.S. proposal to end the Russia‑Ukraine War and persistent global oversupply concerns. (<a href="https://www.reuters.com/business/energy/oil-prices-fall-rising-us-inventories-reinforce-oversupply-concerns-2025-11-19/?utm_source=chatgpt.com" title="Oil falls sharply after report of US proposal to end Russia-Ukraine war">Reuters</a>) <strong>We assess</strong> that market sentiment is fragile and a negative catalyst is likely to trigger broader risk assets correction. <strong>(Moderate-High confidence)</strong></li>
</ul>
<hr>
</section>
<section id="regional-spotlights" class="level2">
<h2 class="anchored" data-anchor-id="regional-spotlights">Regional Spotlights</h2>
<section id="levant-israellebanon" class="level3">
<h3 class="anchored" data-anchor-id="levant-israellebanon">Levant / Israel–Lebanon</h3>
<ul>
<li><strong>Situation:</strong> Israeli airstrikes targeted the Lebanese town of Sidon (Palestinian refugee-camp adjacent) killing 13 individuals according to Lebanese ministry. (<a href="https://www.reuters.com/world/middle-east/eleven-people-killed-israeli-strike-lebanons-sidon-lebanese-health-ministry-says-2025-11-18/?utm_source=chatgpt.com" title="Thirteen people killed in Israeli strike on Lebanon's Sidon, Lebanese health ministry says">Reuters</a>)</li>
<li><strong>Assessment:</strong> Israel is re-escalating strikes in southern Lebanon likely to degrade Hezbollah capabilities. Risk of spill-over into border towns or merchant shipping routes remains elevated. <strong>(Moderate confidence)</strong></li>
<li><strong>Indicators to watch:</strong> Additional evacuation warnings by IDF, Hezbollah retaliatory mortar/rocket fire, LAF/UNIFIL operational statements.</li>
</ul>
<hr>
</section>
<section id="black-sea-ukraine" class="level3">
<h3 class="anchored" data-anchor-id="black-sea-ukraine">Black Sea / Ukraine</h3>
<ul>
<li><strong>Situation:</strong> As per the Institute for the Study of War (ISW), Russian forces continue attempts to encircle the Pokrovsk-Myrnohrad area while simultaneously operating on multiple axes rather than focusing on a single breakthrough. (<a href="https://www.kyivpost.com/post/64489?utm_source=chatgpt.com" title="ISW Russian Offensive Campaign Assessment, November 18, 2025">Kyiv Post</a>)</li>
<li><strong>Assessment:</strong> Russia’s strategy appears aimed at wearing Ukrainian forces down and worsening logistics/defence posture rather than rapid territorial gains. <strong>(High confidence)</strong></li>
<li><strong>Business/financial implications:</strong> Damage to Ukrainian power/energy infrastructure and export routes remains a strong tail-risk for global grain supply and Black Sea shipping.</li>
<li><strong>Indicators to watch:</strong> Reports of Ukrainian grid outages, new port/rail strikes, commodity-grain price jumps.</li>
</ul>
<hr>
</section>
<section id="south-china-sea-philippines" class="level3">
<h3 class="anchored" data-anchor-id="south-china-sea-philippines">South China Sea / Philippines</h3>
<ul>
<li><strong>Situation:</strong> No confirmed major incident today. <strong>(Low‐Moderate confidence)</strong></li>
<li><strong>Assessment:</strong> While kinetic risk remains low currently, the underlying structure of maritime tension persists; insurers and shippers remain on alert.</li>
<li><strong>Indicators to watch:</strong> PCG/PN vessel harassment, Chinese coast guard resupply escort changes, cargo lane detours.</li>
</ul>
<hr>
</section>
<section id="latin-america-venezuela" class="level3">
<h3 class="anchored" data-anchor-id="latin-america-venezuela">Latin America / Venezuela</h3>
<ul>
<li><strong>Situation:</strong> A report by ECLAC shows trade in Latin America and the Caribbean is projected to grow ~5% in 2025 despite U.S. tariff pressure. (<a href="https://www.reuters.com/world/americas/trade-between-latin-america-caribbean-due-grow-2025-despite-us-tariff-policy-2025-11-19/?utm_source=chatgpt.com" title="Trade between Latin America and the Caribbean due to grow in 2025 despite US tariff policy, ECLAC report shows">Reuters</a>)</li>
<li><strong>Assessment:</strong> This resilience suggests regional supply chains may be adapting to U.S. policy headwinds, reducing one macro risk factor. However, Venezuela remains vulnerable to sanctions/energy-flow shocks. <strong>(Moderate confidence)</strong></li>
<li><strong>Business relevance:</strong> Energy and shipping exposures in Venezuela remain latent; export growth in broader Latin America continues to create trade-flow opportunities.</li>
</ul>
<hr>
</section>
<section id="africa-sahelhornsudan" class="level3">
<h3 class="anchored" data-anchor-id="africa-sahelhornsudan">Africa / Sahel–Horn–Sudan</h3>
<ul>
<li><strong>Situation:</strong> No major new headline military or humanitarian event reported today. <strong>(Low confidence)</strong></li>
<li><strong>Assessment:</strong> While acute escalation is not visible today, the durability of aid/logistics corridors remains a structural business risk.</li>
<li><strong>Indicators to watch:</strong> Major RSF/SAF troop movements, humanitarian agency statements on corridor access, major border-closure announcements.</li>
</ul>
<hr>
</section>
</section>
<section id="watch-items-24-72-h" class="level2">
<h2 class="anchored" data-anchor-id="watch-items-24-72-h">Watch Items (24-72 h)</h2>
<ol type="1">
<li><strong>Nvidia earnings and AI valuation reset</strong> – outcome may reset tech market sentiment.</li>
<li><strong>JPY interventions / global FX shock</strong> – rapid yen move could drag global risk assets.</li>
<li><strong>Ukraine cease-fire rumour flow</strong> – U.S. proposal may alter conflict dynamics and commodity pricing.</li>
<li><strong>Israel-Lebanon escalation</strong> – new strikes or Hezbollah retaliation could impact shipping &amp; insurance in Eastern Med.</li>
<li><strong>Latin America trade shift</strong> – ECLAC update signals structural trade resilience despite tariffs; watch logistics/port stocks.</li>
</ol>
<hr>
</section>
<section id="annex-business-financial-indicators" class="level2">
<h2 class="anchored" data-anchor-id="annex-business-financial-indicators">Annex — Business &amp; Financial Indicators</h2>
<section id="macro-markets" class="level3">
<h3 class="anchored" data-anchor-id="macro-markets">Macro &amp; Markets</h3>
<ul>
<li>Tech stocks and small-cap breadth under pressure; risk assets appear stretched. (<a href="https://www.reuters.com/world/china/global-markets-global-markets-2025-11-18/?utm_source=chatgpt.com" title="US stocks lose ground, gold resumes its climb as risk appetite sours">Reuters</a>)</li>
<li><strong>Assessment:</strong> Without a positive trigger, markets may drift lower; hedge positioning and risk-premium widening likely. <strong>(Moderate confidence)</strong></li>
</ul>
</section>
<section id="energy-resources" class="level3">
<h3 class="anchored" data-anchor-id="energy-resources">Energy &amp; Resources</h3>
<ul>
<li>Oil jumped initially but fell ~2.6% after U.S. cease-fire proposal and supply concerns. (<a href="https://www.reuters.com/business/energy/oil-prices-fall-rising-us-inventories-reinforce-oversupply-concerns-2025-11-19/?utm_source=chatgpt.com" title="Oil falls sharply after report of US proposal to end Russia-Ukraine war">Reuters</a>)</li>
<li><strong>Assessment:</strong> While supply disruption risk remains, near term is dominated by demand softness and policy signals. <strong>(Moderate confidence)</strong></li>
</ul>
</section>
<section id="defense-industrial-base" class="level3">
<h3 class="anchored" data-anchor-id="defense-industrial-base">Defense / Industrial Base</h3>
<ul>
<li>No new major arms-deal announced publicly today. <strong>(Low confidence)</strong></li>
<li><strong>Assessment:</strong> Defence/industrial equities may be less sensitive today, but conflict theatres (Ukraine, Levant) continue to offer longer-term contract visibility.</li>
</ul>
<hr>
</section>
<section id="notes-on-confidence" class="level3">
<h3 class="anchored" data-anchor-id="notes-on-confidence">Notes on Confidence</h3>
<ul>
<li><strong>High confidence:</strong> Multiple independent sources, consistent indicators.</li>
<li><strong>Moderate confidence:</strong> Good sources yet incomplete picture or rapidly evolving.</li>
<li><strong>Low confidence:</strong> Fragmentary, single-source, or limited visibility.</li>
</ul>
<hr>
</section>
<section id="sources" class="level3">
<h3 class="anchored" data-anchor-id="sources">Sources</h3>


</section>
</section>

</main> <!-- /main -->
<hr style="margin-top:2em;margin-bottom:1em;">

<p><strong>Disclaimer:</strong> The ChatGPT Daily Brief (CDB), or any Special Brief (SB) is automatically generated from open-source material and may contain errors, omissions, or outdated information. It is provided “as is,” without warranties of any kind, express or implied. The CDB/SB is not investment, legal, security, or policy advice and must not be relied upon for decision-making. You are responsible for independently verifying facts and conclusions with primary sources and qualified professionals. Neither the author nor providers of this service accept any liability for losses or harms arising from use of this content. No duty to update is assumed.</p>


<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>